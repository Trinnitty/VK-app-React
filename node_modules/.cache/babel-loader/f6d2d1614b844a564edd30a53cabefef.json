{"ast":null,"code":"export var GET_PHOTOS_REQUEST = \"GET_PHOTOS_REQUEST\";\nexport var GET_PHOTOS_SUCCESS = \"GET_PHOTOS_SUCCESS\";\nexport var GET_PHOTOS_FAIL = \"GET_PHOTOS_FAIL\";\nexport function getPhotos(year) {\n  return function (dispatch) {\n    dispatch({\n      type: GET_PHOTOS_REQUEST,\n      payload: year\n    }); //eslint-disable-next-line no-undef\n\n    VK.Api.call(\"photos.get\", {\n      v: 5.92,\n      extended: 1,\n      count: 1000,\n      album_id: -7,\n      owner_id: -1\n    }, function (r) {\n      console.log(r.response);\n\n      try {\n        var photosOfYear = [];\n        r.response.items.forEach(function (item, i, arr) {\n          if (new Date(item.date * 1000).getFullYear() === year) {\n            photosOfYear.push(item);\n          }\n        });\n        photosOfYear.sort(function (a, b) {\n          return a.likes.count - b.likes.count;\n        });\n        dispatch({\n          type: GET_PHOTOS_SUCCESS,\n          payload: photosOfYear\n        });\n      } catch (_unused) {\n        dispatch({\n          type: GET_PHOTOS_FAIL,\n          error: true,\n          payload: new Error(\"Fail to load photos\")\n        });\n      }\n    });\n  };\n}","map":{"version":3,"sources":["E:\\react\\redux-react\\src\\actions\\PageAction.js"],"names":["GET_PHOTOS_REQUEST","GET_PHOTOS_SUCCESS","GET_PHOTOS_FAIL","getPhotos","year","dispatch","type","payload","VK","Api","call","v","extended","count","album_id","owner_id","r","console","log","response","photosOfYear","items","forEach","item","i","arr","Date","date","getFullYear","push","sort","a","b","likes","error","Error"],"mappings":"AAAA,OAAO,IAAMA,kBAAkB,GAAG,oBAA3B;AACP,OAAO,IAAMC,kBAAkB,GAAG,oBAA3B;AACP,OAAO,IAAMC,eAAe,GAAG,iBAAxB;AAEP,OAAO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AAC9B,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEN,kBADC;AAEPO,MAAAA,OAAO,EAAEH;AAFF,KAAD,CAAR,CADiB,CAMjB;;AACAI,IAAAA,EAAE,CAACC,GAAH,CAAOC,IAAP,CACE,YADF,EAEE;AACEC,MAAAA,CAAC,EAAE,IADL;AAEEC,MAAAA,QAAQ,EAAE,CAFZ;AAGEC,MAAAA,KAAK,EAAE,IAHT;AAIEC,MAAAA,QAAQ,EAAE,CAAC,CAJb;AAKEC,MAAAA,QAAQ,EAAE,CAAC;AALb,KAFF,EASE,UAAAC,CAAC,EAAI;AACHC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,QAAd;;AAEA,UAAI;AACF,YAAIC,YAAY,GAAG,EAAnB;AACAJ,QAAAA,CAAC,CAACG,QAAF,CAAWE,KAAX,CAAiBC,OAAjB,CAAyB,UAACC,IAAD,EAAOC,CAAP,EAAUC,GAAV,EAAkB;AACzC,cAAI,IAAIC,IAAJ,CAASH,IAAI,CAACI,IAAL,GAAY,IAArB,EAA2BC,WAA3B,OAA6CxB,IAAjD,EAAuD;AACrDgB,YAAAA,YAAY,CAACS,IAAb,CAAkBN,IAAlB;AACD;AACF,SAJD;AAKAH,QAAAA,YAAY,CAACU,IAAb,CAAkB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC1B,iBAAOD,CAAC,CAACE,KAAF,CAAQpB,KAAR,GAAgBmB,CAAC,CAACC,KAAF,CAAQpB,KAA/B;AACD,SAFD;AAGAR,QAAAA,QAAQ,CAAC;AACPC,UAAAA,IAAI,EAAEL,kBADC;AAEPM,UAAAA,OAAO,EAAEa;AAFF,SAAD,CAAR;AAID,OAdD,CAcE,gBAAM;AACNf,QAAAA,QAAQ,CAAC;AACPC,UAAAA,IAAI,EAAEJ,eADC;AAEPgC,UAAAA,KAAK,EAAE,IAFA;AAGP3B,UAAAA,OAAO,EAAE,IAAI4B,KAAJ,CAAU,qBAAV;AAHF,SAAD,CAAR;AAKD;AACF,KAjCH;AAmCD,GA1CD;AA2CD","sourcesContent":["export const GET_PHOTOS_REQUEST = \"GET_PHOTOS_REQUEST\";\r\nexport const GET_PHOTOS_SUCCESS = \"GET_PHOTOS_SUCCESS\";\r\nexport const GET_PHOTOS_FAIL = \"GET_PHOTOS_FAIL\";\r\n\r\nexport function getPhotos(year) {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: GET_PHOTOS_REQUEST,\r\n      payload: year\r\n    });\r\n\r\n    //eslint-disable-next-line no-undef\r\n    VK.Api.call(\r\n      \"photos.get\",\r\n      {\r\n        v: 5.92,\r\n        extended: 1,\r\n        count: 1000,\r\n        album_id: -7,\r\n        owner_id: -1\r\n      },\r\n      r => {\r\n        console.log(r.response);\r\n\r\n        try {\r\n          let photosOfYear = [];\r\n          r.response.items.forEach((item, i, arr) => {\r\n            if (new Date(item.date * 1000).getFullYear() === year) {\r\n              photosOfYear.push(item);\r\n            }\r\n          });\r\n          photosOfYear.sort((a, b) => {\r\n            return a.likes.count - b.likes.count;\r\n          });\r\n          dispatch({\r\n            type: GET_PHOTOS_SUCCESS,\r\n            payload: photosOfYear\r\n          });\r\n        } catch {\r\n          dispatch({\r\n            type: GET_PHOTOS_FAIL,\r\n            error: true,\r\n            payload: new Error(\"Fail to load photos\")\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}